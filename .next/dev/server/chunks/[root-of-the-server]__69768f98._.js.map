{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/koyaemer/Development/StNinoFinals/lib/supabaseClient.ts"],"sourcesContent":["// lib/supabaseClient.ts\nimport { Database } from '@/database.types'\nimport { createClient } from '@supabase/supabase-js'\n\n/**\n * Supabase Client for Client-Side Operations\n * \n * This client uses the ANON key and is safe to use in browser code.\n * It respects Row Level Security (RLS) policies in Supabase.\n * \n * DO NOT use service role key here - it bypasses RLS and is a security risk.\n * For admin operations, use getSupabaseAdmin() in server-side code only.\n */\n\n// Get environment variables\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\n// Validate that environment variables are set\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error('Missing Supabase environment variables')\n}\n\n/**\n * Supabase client instance with typed database schema\n * Use this for all client-side database operations\n */\nexport const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey)"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AAExB;;AAEA;;;;;;;;CAQC,GAED,4BAA4B;AAC5B,MAAM;AACN,MAAM;AAEN,8CAA8C;AAC9C;;AAQO,MAAM,WAAW,IAAA,yMAAY,EAAW,aAAa"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///Users/koyaemer/Development/StNinoFinals/app/api/parent/student-stats/route.ts"],"sourcesContent":["import { supabase } from '@/lib/supabaseClient'\nimport { NextResponse } from 'next/server'\n\nexport async function GET(request: Request) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const studentId = searchParams.get('student_id')\n\n    if (!studentId) {\n      return NextResponse.json(\n        { success: false, error: 'Student ID is required' },\n        { status: 400 }\n      )\n    }\n\n    // Fetch grades to calculate GPA\n    const { data: grades, error: gradesError } = await supabase\n      .from('grades')\n      .select('grade')\n      .eq('student_id', studentId)\n\n    let gpa = 0\n    if (!gradesError && grades && grades.length > 0) {\n      const total = grades.reduce((sum, g) => sum + g.grade, 0)\n      gpa = total / grades.length\n    }\n\n    // Fetch attendance records to calculate attendance rate\n    const { data: attendanceRecords, error: attendanceError } = await supabase\n      .from('attendance_records')\n      .select('status')\n      .eq('user_id', studentId)\n\n    let attendanceRate = 0\n    if (!attendanceError && attendanceRecords && attendanceRecords.length > 0) {\n      const presentCount = attendanceRecords.filter(\n        (record) => record.status === 'present' || record.status === 'late'\n      ).length\n      attendanceRate = (presentCount / attendanceRecords.length) * 100\n    }\n\n    // Fetch pending tasks/assignments (if you have an assignments table)\n    // For now, we'll set it to 0 or fetch from a different source\n    const pendingTasks = 0\n\n    // Behavior score (if you have a behavior tracking system)\n    // For now, we'll calculate based on attendance and punctuality\n    let behaviorScore = 85\n    if (attendanceRecords && attendanceRecords.length > 0) {\n      const lateCount = attendanceRecords.filter((record) => record.status === 'late').length\n      const absentCount = attendanceRecords.filter((record) => record.status === 'absent').length\n      behaviorScore = Math.max(0, 100 - (lateCount * 2) - (absentCount * 5))\n    }\n\n    return NextResponse.json({\n      success: true,\n      stats: {\n        gpa: parseFloat(gpa.toFixed(2)),\n        attendanceRate: parseFloat(attendanceRate.toFixed(2)),\n        behaviorScore: parseFloat(behaviorScore.toFixed(2)),\n        pendingTasks,\n      },\n    })\n  } catch (error: any) {\n    console.error('Student stats API error:', error)\n    return NextResponse.json(\n      { success: false, error: error?.message || 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,YAAY,aAAa,GAAG,CAAC;QAEnC,IAAI,CAAC,WAAW;YACd,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAyB,GAClD;gBAAE,QAAQ;YAAI;QAElB;QAEA,gCAAgC;QAChC,MAAM,EAAE,MAAM,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,mIAAQ,CACxD,IAAI,CAAC,UACL,MAAM,CAAC,SACP,EAAE,CAAC,cAAc;QAEpB,IAAI,MAAM;QACV,IAAI,CAAC,eAAe,UAAU,OAAO,MAAM,GAAG,GAAG;YAC/C,MAAM,QAAQ,OAAO,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK,EAAE;YACvD,MAAM,QAAQ,OAAO,MAAM;QAC7B;QAEA,wDAAwD;QACxD,MAAM,EAAE,MAAM,iBAAiB,EAAE,OAAO,eAAe,EAAE,GAAG,MAAM,mIAAQ,CACvE,IAAI,CAAC,sBACL,MAAM,CAAC,UACP,EAAE,CAAC,WAAW;QAEjB,IAAI,iBAAiB;QACrB,IAAI,CAAC,mBAAmB,qBAAqB,kBAAkB,MAAM,GAAG,GAAG;YACzE,MAAM,eAAe,kBAAkB,MAAM,CAC3C,CAAC,SAAW,OAAO,MAAM,KAAK,aAAa,OAAO,MAAM,KAAK,QAC7D,MAAM;YACR,iBAAiB,AAAC,eAAe,kBAAkB,MAAM,GAAI;QAC/D;QAEA,qEAAqE;QACrE,8DAA8D;QAC9D,MAAM,eAAe;QAErB,0DAA0D;QAC1D,+DAA+D;QAC/D,IAAI,gBAAgB;QACpB,IAAI,qBAAqB,kBAAkB,MAAM,GAAG,GAAG;YACrD,MAAM,YAAY,kBAAkB,MAAM,CAAC,CAAC,SAAW,OAAO,MAAM,KAAK,QAAQ,MAAM;YACvF,MAAM,cAAc,kBAAkB,MAAM,CAAC,CAAC,SAAW,OAAO,MAAM,KAAK,UAAU,MAAM;YAC3F,gBAAgB,KAAK,GAAG,CAAC,GAAG,MAAO,YAAY,IAAM,cAAc;QACrE;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,OAAO;gBACL,KAAK,WAAW,IAAI,OAAO,CAAC;gBAC5B,gBAAgB,WAAW,eAAe,OAAO,CAAC;gBAClD,eAAe,WAAW,cAAc,OAAO,CAAC;gBAChD;YACF;QACF;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO,OAAO,WAAW;QAAwB,GACnE;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}