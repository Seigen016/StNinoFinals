{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/koyaemer/Development/StNinoFinals/lib/supabaseClient.ts"],"sourcesContent":["// lib/supabaseClient.ts\nimport { Database } from '@/database.types'\nimport { createClient } from '@supabase/supabase-js'\n\n/**\n * Supabase Client for Client-Side Operations\n * \n * This client uses the ANON key and is safe to use in browser code.\n * It respects Row Level Security (RLS) policies in Supabase.\n * \n * DO NOT use service role key here - it bypasses RLS and is a security risk.\n * For admin operations, use getSupabaseAdmin() in server-side code only.\n */\n\n// Get environment variables\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\n// Validate that environment variables are set\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error('Missing Supabase environment variables')\n}\n\n/**\n * Supabase client instance with typed database schema\n * Use this for all client-side database operations\n */\nexport const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey)"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AAExB;;AAEA;;;;;;;;CAQC,GAED,4BAA4B;AAC5B,MAAM;AACN,MAAM;AAEN,8CAA8C;AAC9C;;AAQO,MAAM,WAAW,IAAA,yMAAY,EAAW,aAAa"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///Users/koyaemer/Development/StNinoFinals/app/api/parent/student-attendance/route.ts"],"sourcesContent":["import { supabase } from '@/lib/supabaseClient'\nimport { NextResponse } from 'next/server'\n\nexport async function GET(request: Request) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const studentId = searchParams.get('student_id')\n    const days = parseInt(searchParams.get('days') || '7')\n\n    if (!studentId) {\n      return NextResponse.json(\n        { success: false, error: 'Student ID is required' },\n        { status: 400 }\n      )\n    }\n\n    // Calculate the date range\n    const startDate = new Date()\n    startDate.setDate(startDate.getDate() - days)\n\n    // Fetch attendance records from the database\n    const { data: attendanceRecords, error } = await supabase\n      .from('attendance_records')\n      .select('*')\n      .eq('user_id', studentId)\n      .gte('scan_datetime', startDate.toISOString())\n      .order('scan_datetime', { ascending: false })\n\n    if (error) {\n      console.error('Error fetching attendance:', error)\n      // Return empty attendance if table doesn't exist or error occurs\n      return NextResponse.json({\n        success: true,\n        attendance: [],\n        message: 'No attendance records found',\n      })\n    }\n\n    // Format the attendance data\n    const formattedAttendance = attendanceRecords.map((record) => ({\n      date: record.scan_datetime,\n      status: record.status,\n      time: record.time_in || record.scan_datetime,\n      timeIn: record.time_in,\n      timeOut: record.time_out,\n    }))\n\n    return NextResponse.json({\n      success: true,\n      attendance: formattedAttendance,\n    })\n  } catch (error: any) {\n    console.error('Student attendance API error:', error)\n    return NextResponse.json(\n      { success: false, error: error?.message || 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,YAAY,aAAa,GAAG,CAAC;QACnC,MAAM,OAAO,SAAS,aAAa,GAAG,CAAC,WAAW;QAElD,IAAI,CAAC,WAAW;YACd,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAAyB,GAClD;gBAAE,QAAQ;YAAI;QAElB;QAEA,2BAA2B;QAC3B,MAAM,YAAY,IAAI;QACtB,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;QAExC,6CAA6C;QAC7C,MAAM,EAAE,MAAM,iBAAiB,EAAE,KAAK,EAAE,GAAG,MAAM,mIAAQ,CACtD,IAAI,CAAC,sBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,WACd,GAAG,CAAC,iBAAiB,UAAU,WAAW,IAC1C,KAAK,CAAC,iBAAiB;YAAE,WAAW;QAAM;QAE7C,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,iEAAiE;YACjE,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,YAAY,EAAE;gBACd,SAAS;YACX;QACF;QAEA,6BAA6B;QAC7B,MAAM,sBAAsB,kBAAkB,GAAG,CAAC,CAAC,SAAW,CAAC;gBAC7D,MAAM,OAAO,aAAa;gBAC1B,QAAQ,OAAO,MAAM;gBACrB,MAAM,OAAO,OAAO,IAAI,OAAO,aAAa;gBAC5C,QAAQ,OAAO,OAAO;gBACtB,SAAS,OAAO,QAAQ;YAC1B,CAAC;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,YAAY;QACd;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO,OAAO,WAAW;QAAwB,GACnE;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}