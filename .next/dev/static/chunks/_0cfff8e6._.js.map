{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/koyaemer/Development/StNinoFinals/lib/supabaseClient.ts"],"sourcesContent":["// lib/supabaseClient.ts\nimport { Database } from '@/database.types'\nimport { createClient } from '@supabase/supabase-js'\n\n/**\n * Supabase Client for Client-Side Operations\n * \n * This client uses the ANON key and is safe to use in browser code.\n * It respects Row Level Security (RLS) policies in Supabase.\n * \n * DO NOT use service role key here - it bypasses RLS and is a security risk.\n * For admin operations, use getSupabaseAdmin() in server-side code only.\n */\n\n// Get environment variables\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\n// Validate that environment variables are set\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error('Missing Supabase environment variables')\n}\n\n/**\n * Supabase client instance with typed database schema\n * Use this for all client-side database operations\n */\nexport const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey)"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AAeJ;AAbpB;;AAEA;;;;;;;;CAQC,GAED,4BAA4B;AAC5B,MAAM;AACN,MAAM;AAEN,8CAA8C;AAC9C;;AAQO,MAAM,WAAW,IAAA,0MAAY,EAAW,aAAa"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/koyaemer/Development/StNinoFinals/app/context/user-context.tsx"],"sourcesContent":["'use client';\n\nimport { supabase } from \"@/lib/supabaseClient\";\nimport { createContext, ReactNode, useContext, useEffect, useState } from \"react\";\n\n/**\n * User interface representing authenticated user data\n */\nexport interface User {\n    id: string;\n    email: string;\n    role?: string;\n    first_name?: string;\n    last_name?: string;\n}\n\n/**\n * Context type for user authentication state\n */\ninterface UserContextType {    \n    user: User | null;\n}\n\n/**\n * React Context for managing user authentication across the app\n */\nconst UserContext = createContext<UserContextType | null>(null);\n\n/**\n * UserProvider Component\n * Provides user authentication state to all child components\n * Automatically fetches user data on mount using Supabase Auth\n * \n * @param children - Child components that need access to user state\n */\nexport function UserProvider({ children }: { children: ReactNode }) {\n    const [user, setUser] = useState<User | null>(null);\n\n    /**\n     * Fetches current authenticated user from Supabase\n     * Sets user state or null if not authenticated\n     */\n    const getUser = async () => {\n        const {data: authData, error: authError} = await supabase.auth.getUser();\n        if(authError || !authData.user){\n            console.log(\"Error fetching user:\", authError?.message);\n            setUser(null);\n        } else {\n            // Fetch full user profile from users table to get role\n            const { data: profileData, error: profileError } = await supabase\n                .from('users')\n                .select('id, email, role, first_name, last_name')\n                .eq('id', authData.user.id)\n                .single();\n            \n            if (profileError || !profileData) {\n                console.log(\"Error fetching user profile:\", profileError?.message);\n                setUser({\n                    id: authData.user.id,\n                    email: authData.user.email || '',\n                });\n            } else {\n                setUser(profileData);\n            }\n        }\n    }\n    \n    useEffect(() => {\n        getUser();\n    });\n    \n    return (\n    <UserContext.Provider value={{ user }}>\n      {children}\n    </UserContext.Provider>\n  );\n}\n\n/**\n * Custom hook to access user authentication state\n * Must be used within a UserProvider component\n * \n * @returns UserContextType containing user state\n * @throws Error if used outside UserProvider\n */\nexport function useUser() {\n  const ctx = useContext(UserContext);\n  if (!ctx) {\n    throw new Error(\"useUser must be used inside <UserProvider>\");\n  }\n  return ctx;\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAuBA;;CAEC,GACD,MAAM,4BAAc,IAAA,8KAAa,EAAyB;AASnD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAC9D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAE9C;;;KAGC,GACD,MAAM,UAAU;QACZ,MAAM,EAAC,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAC,GAAG,MAAM,oIAAQ,CAAC,IAAI,CAAC,OAAO;QACtE,IAAG,aAAa,CAAC,SAAS,IAAI,EAAC;YAC3B,QAAQ,GAAG,CAAC,wBAAwB,WAAW;YAC/C,QAAQ;QACZ,OAAO;YACH,uDAAuD;YACvD,MAAM,EAAE,MAAM,WAAW,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,oIAAQ,CAC5D,IAAI,CAAC,SACL,MAAM,CAAC,0CACP,EAAE,CAAC,MAAM,SAAS,IAAI,CAAC,EAAE,EACzB,MAAM;YAEX,IAAI,gBAAgB,CAAC,aAAa;gBAC9B,QAAQ,GAAG,CAAC,gCAAgC,cAAc;gBAC1D,QAAQ;oBACJ,IAAI,SAAS,IAAI,CAAC,EAAE;oBACpB,OAAO,SAAS,IAAI,CAAC,KAAK,IAAI;gBAClC;YACJ,OAAO;gBACH,QAAQ;YACZ;QACJ;IACJ;IAEA,IAAA,0KAAS;kCAAC;YACN;QACJ;;IAEA,qBACA,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;QAAK;kBACjC;;;;;;AAGP;GAzCgB;KAAA;AAkDT,SAAS;;IACd,MAAM,MAAM,IAAA,2KAAU,EAAC;IACvB,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/koyaemer/Development/StNinoFinals/app/providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { UserProvider } from \"./context/user-context\";\n\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  return <UserProvider>{children}</UserProvider>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,qBAAO,6LAAC,qJAAY;kBAAE;;;;;;AACxB;KAFgB"}}]
}