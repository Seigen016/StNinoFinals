(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66542,e=>{"use strict";let a=(0,e.i(11041).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>a],66542)},36007,57590,e=>{"use strict";var a=e.i(7426),t=e.i(94179),s=e.i(53210),r=e.i(84175),l=e.i(12313),n=e.i(8720);function i({admin:e}){let[i,d]=(0,n.useState)(!1),{showAlert:c}=(0,r.useAlert)(),o=e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.name||e.email.split("@")[0],m=async()=>{d(!0);try{let{error:e}=await s.supabase.auth.signOut();if(e){console.error("Logout error:",e),c({message:"Error signing out. Please try again.",type:"error"}),d(!1);return}window.location.href="/"}catch(e){console.error("Logout error:",e),c({message:"Error signing out. Please try again.",type:"error"}),d(!1)}};return(0,a.jsx)("header",{className:"bg-gradient-to-r from-red-800 to-red-700 text-white shadow-lg sticky top-0 z-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(l.default,{src:"/logo.png",alt:"Sto. Niño Logo",width:50,height:50,className:"rounded-full bg-white p-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Admin Portal"}),(0,a.jsx)("p",{className:"text-red-100 text-sm",children:"Sto. Niño de Praga Academy"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:o}),(0,a.jsx)(t.Badge,{variant:"secondary",className:"bg-red-900 text-white hover:bg-red-900",children:"Administrator"})]}),(0,a.jsx)("button",{onClick:m,disabled:i,className:"px-4 py-2 bg-white text-red-800 rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:i?"Logging out...":"Logout"})]})]})})})}function d(){let[e,a]=(0,n.useState)(null),[t,r]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{try{let{data:e,error:t}=await s.supabase.auth.getUser();if(t){console.error("Auth error:",t),window.location.href="/";return}if(!e.user){window.location.href="/";return}let{data:r,error:l}=await s.supabase.from("users").select("*").eq("email",e.user.email||"").eq("role","admin").single();if(l||!r){console.error("Admin check error:",l),window.location.href="/";return}a(r)}catch(e){console.error("Unexpected error:",e),window.location.href="/"}finally{r(!1)}})()},[]),{admin:e,loading:t}}e.s(["AdminHeader",()=>i],36007),e.s(["useAuth",()=>d],57590)},44858,e=>{"use strict";let a=(0,e.i(11041).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],44858)},47627,e=>{"use strict";var a=e.i(7426),t=e.i(8720),s=e.i(47163);let r=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",e),...t})}));r.displayName="Table";let l=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",e),...t}));l.displayName="TableHeader";let n=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...t}));n.displayName="TableBody",t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let i=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));i.displayName="TableRow";let d=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let c=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableCell",t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>n,"TableCell",()=>c,"TableHead",()=>d,"TableHeader",()=>l,"TableRow",()=>i])},4233,e=>{"use strict";let a=(0,e.i(11041).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],4233)},96623,e=>{"use strict";let a=(0,e.i(11041).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>a],96623)},41517,e=>{"use strict";let a=(0,e.i(11041).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>a],41517)},52917,22024,61195,e=>{"use strict";var a=e.i(7426),t=e.i(8720),s=e.i(49707),r=e.i(94237),l=e.i(52640),n=e.i(47163);let i=s.Root;s.Trigger,s.Close;let d=s.Portal,c=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s.Overlay,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));c.displayName=s.Overlay.displayName;let o=(0,r.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),m=t.forwardRef(({side:e="right",className:t,children:r,...i},m)=>(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(s.Content,{ref:m,className:(0,n.cn)(o({side:e}),t),...i,children:[r,(0,a.jsxs)(s.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(l.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=s.Content.displayName;let h=({className:e,...t})=>(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});h.displayName="SheetHeader";let u=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s.Title,{ref:r,className:(0,n.cn)("text-lg font-semibold text-foreground",e),...t}));u.displayName=s.Title.displayName;let x=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)(s.Description,{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));x.displayName=s.Description.displayName,e.s(["Sheet",()=>i,"SheetContent",()=>m,"SheetDescription",()=>x,"SheetHeader",()=>h,"SheetTitle",()=>u],52917);var p=e.i(11041);let j=(0,p.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>j],22024);let g=(0,p.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>g],61195)},9971,e=>{"use strict";var a=e.i(7426),t=e.i(94179),s=e.i(67881),r=e.i(70065),l=e.i(30374),n=e.i(23750),i=e.i(10708),d=e.i(62870),c=e.i(52917),o=e.i(47627),m=e.i(84175),h=e.i(11678),u=e.i(44858),x=e.i(22024),p=e.i(4233),j=e.i(41517),g=e.i(61195),f=e.i(96623),b=e.i(66542),y=e.i(21060),v=e.i(8720),N=e.i(36007),w=e.i(57590);function S(){let{admin:e,loading:S}=(0,w.useAuth)(),[_,C]=(0,v.useState)([]),[T,k]=(0,v.useState)([]),[E,P]=(0,v.useState)(!1),[L,A]=(0,v.useState)(""),[D,H]=(0,v.useState)(!1),[B,I]=(0,v.useState)(!1),[R,M]=(0,v.useState)(!1),[$,O]=(0,v.useState)(!1),[U,q]=(0,v.useState)(null),{showAlert:F}=(0,m.useAlert)(),{showConfirm:z}=(0,h.useConfirm)(),[V,G]=(0,v.useState)({first_name:"",last_name:"",middle_name:"",email:"",phone_number:"",address:""}),[J,K]=(0,v.useState)({id:"",first_name:"",last_name:"",middle_name:"",email:"",phone_number:"",address:""}),[W,X]=(0,v.useState)({parent_id:"",student_id:"",relationship_type:"parent",is_primary:!0}),[Q,Y]=(0,v.useState)(!1),[Z,ee]=(0,v.useState)(!1),[ea,et]=(0,v.useState)(!1),[es,er]=(0,v.useState)(!1),[el,en]=(0,v.useState)(""),[ei,ed]=(0,v.useState)(""),[ec,eo]=(0,v.useState)(""),em=async()=>{P(!0);try{let e=await fetch("/api/admin/parents"),a=await e.json();a.success&&a.parents&&C(a.parents)}catch(e){console.error("Error fetching parents:",e)}finally{P(!1)}},eh=async()=>{try{let e=await fetch("/api/admin/students"),a=await e.json();a.success&&a.students&&k(a.students)}catch(e){console.error("Error fetching students:",e)}};(0,v.useEffect)(()=>{em(),eh()},[]);let eu=_.filter(e=>`${e.first_name} ${e.last_name} ${e.email}`.toLowerCase().includes(L.toLowerCase())),ex=async e=>{e.preventDefault(),Y(!0),en("");try{let e=`Parent${Math.random().toString(36).slice(-8)}${Math.floor(100*Math.random())}`,a=await fetch("/api/admin/parents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...V,password:e})}),t=await a.json();if(!t.success)throw Error(t.error||"Failed to add parent");await em(),G({first_name:"",last_name:"",middle_name:"",email:"",phone_number:"",address:""}),H(!1),F({message:`Parent added successfully!

Login Credentials:
Email: ${V.email}
Password: ${e}

Please save these credentials!`,type:"success"})}catch(e){en(e?.message||"Failed to add parent.")}finally{Y(!1)}},ep=async e=>{e.preventDefault(),ee(!0),ed("");try{let e=await fetch(`/api/admin/parents/${J.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)}),a=await e.json();if(!a.success)throw Error(a.error||"Failed to update parent");await em(),I(!1),F({message:"Parent updated successfully!",type:"success"})}catch(e){ed(e?.message||"Failed to update parent.")}finally{ee(!1)}},ej=async(e,a)=>{if(await z({message:`Are you sure you want to delete ${a}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive"})){et(!0);try{let a=await fetch(`/api/admin/parents/${e}`,{method:"DELETE"}),t=await a.json();if(!t.success)throw Error(t.error||"Failed to delete parent");await em(),F({message:"Parent deleted successfully!",type:"success"})}catch(e){F({message:e?.message||"Failed to delete parent.",type:"error"})}finally{et(!1)}}},eg=async e=>{e.preventDefault(),er(!0),eo("");try{let e=await fetch("/api/admin/parents/link-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}),a=await e.json();if(!a.success)throw Error(a.error||"Failed to link student");await em(),O(!1),X({parent_id:"",student_id:"",relationship_type:"parent",is_primary:!0}),F({message:"Student linked successfully!",type:"success"})}catch(e){eo(e?.message||"Failed to link student.")}finally{er(!1)}};return S||!e?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-red-800 border-t-transparent"}),(0,a.jsx)("p",{className:"mt-4 text-red-800 font-medium",children:"Loading..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-red-50",children:[(0,a.jsx)(N.AdminHeader,{admin:e}),(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-6 flex items-center gap-4",children:[(0,a.jsx)(y.default,{href:"/admin",children:(0,a.jsxs)(s.Button,{variant:"ghost",size:"sm",className:"hover:bg-red-50",children:[(0,a.jsx)(u.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back"]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-red-800",children:"Parent/Guardian Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage parent and guardian accounts"})]}),(0,a.jsxs)(l.Dialog,{open:D,onOpenChange:H,children:[(0,a.jsx)(l.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(s.Button,{className:"bg-red-800 hover:bg-red-700",children:[(0,a.jsx)(f.UserPlus,{className:"w-4 h-4 mr-2"}),"Add Parent"]})}),(0,a.jsxs)(l.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(l.DialogHeader,{children:[(0,a.jsx)(l.DialogTitle,{className:"text-red-800",children:"Add New Parent/Guardian"}),(0,a.jsx)(l.DialogDescription,{children:"Enter parent information to create a new account"})]}),(0,a.jsxs)("form",{onSubmit:ex,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"First Name *"}),(0,a.jsx)(n.Input,{value:V.first_name,onChange:e=>G({...V,first_name:e.target.value}),placeholder:"Enter first name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Last Name *"}),(0,a.jsx)(n.Input,{value:V.last_name,onChange:e=>G({...V,last_name:e.target.value}),placeholder:"Enter last name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Middle Name"}),(0,a.jsx)(n.Input,{value:V.middle_name,onChange:e=>G({...V,middle_name:e.target.value}),placeholder:"Enter middle name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Email *"}),(0,a.jsx)(n.Input,{type:"email",value:V.email,onChange:e=>G({...V,email:e.target.value}),placeholder:"Enter email address",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Phone Number *"}),(0,a.jsx)(n.Input,{value:V.phone_number,onChange:e=>G({...V,phone_number:e.target.value}),placeholder:"Enter phone number",required:!0})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(i.Label,{children:"Address"}),(0,a.jsx)(n.Input,{value:V.address,onChange:e=>G({...V,address:e.target.value}),placeholder:"Enter complete address"})]})]}),el&&(0,a.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded",children:el}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>H(!1),disabled:Q,children:"Cancel"}),(0,a.jsx)(s.Button,{type:"submit",className:"bg-red-800 hover:bg-red-700",disabled:Q,children:Q?"Adding...":"Add Parent"})]})]})]})]})]}),(0,a.jsx)(l.Dialog,{open:B,onOpenChange:I,children:(0,a.jsxs)(l.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(l.DialogHeader,{children:[(0,a.jsx)(l.DialogTitle,{className:"text-red-800",children:"Edit Parent/Guardian"}),(0,a.jsx)(l.DialogDescription,{children:"Update parent information"})]}),(0,a.jsxs)("form",{onSubmit:ep,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"First Name *"}),(0,a.jsx)(n.Input,{value:J.first_name,onChange:e=>K({...J,first_name:e.target.value}),placeholder:"Enter first name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Last Name *"}),(0,a.jsx)(n.Input,{value:J.last_name,onChange:e=>K({...J,last_name:e.target.value}),placeholder:"Enter last name",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Middle Name"}),(0,a.jsx)(n.Input,{value:J.middle_name,onChange:e=>K({...J,middle_name:e.target.value}),placeholder:"Enter middle name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Email *"}),(0,a.jsx)(n.Input,{type:"email",value:J.email,onChange:e=>K({...J,email:e.target.value}),placeholder:"Enter email address",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Phone Number"}),(0,a.jsx)(n.Input,{value:J.phone_number,onChange:e=>K({...J,phone_number:e.target.value}),placeholder:"Enter phone number"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(i.Label,{children:"Address"}),(0,a.jsx)(n.Input,{value:J.address,onChange:e=>K({...J,address:e.target.value}),placeholder:"Enter complete address"})]})]}),ei&&(0,a.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded",children:ei}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>I(!1),disabled:Z,children:"Cancel"}),(0,a.jsx)(s.Button,{type:"submit",className:"bg-red-800 hover:bg-red-700",disabled:Z,children:Z?"Updating...":"Update Parent"})]})]})]})}),(0,a.jsx)(c.Sheet,{open:R,onOpenChange:M,children:(0,a.jsxs)(c.SheetContent,{side:"right",className:"w-full sm:max-w-lg overflow-y-auto",children:[(0,a.jsxs)(c.SheetHeader,{children:[(0,a.jsx)(c.SheetTitle,{className:"text-red-800",children:"Parent/Guardian Details"}),(0,a.jsx)(c.SheetDescription,{children:"View complete parent/guardian information"})]}),U&&(0,a.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"pb-3 border-b",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Full Name"}),(0,a.jsx)("p",{className:"text-base font-semibold",children:`${U.first_name} ${U.middle_name||""} ${U.last_name}`.trim()})]}),(0,a.jsxs)("div",{className:"pb-3 border-b",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),(0,a.jsx)("p",{className:"text-base",children:U.email})]}),(0,a.jsxs)("div",{className:"pb-3 border-b",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Phone Number"}),(0,a.jsx)("p",{className:"text-base",children:U.phone_number||"N/A"})]}),(0,a.jsxs)("div",{className:"pb-3 border-b",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Address"}),(0,a.jsx)("p",{className:"text-base",children:U.address||"N/A"})]}),(0,a.jsxs)("div",{className:"pb-3 border-b",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"}),(0,a.jsx)(t.Badge,{className:"bg-green-100 text-green-800",children:U.status})]})]}),U.children&&U.children.length>0&&(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Children/Wards"}),(0,a.jsx)("div",{className:"space-y-2",children:U.children.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg flex items-center justify-between hover:bg-gray-100 transition-colors",children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsx)(t.Badge,{variant:"outline",className:"bg-white",children:e.relationship_type})]},e.id))})]})]})]})}),(0,a.jsx)(l.Dialog,{open:$,onOpenChange:O,children:(0,a.jsxs)(l.DialogContent,{children:[(0,a.jsxs)(l.DialogHeader,{children:[(0,a.jsx)(l.DialogTitle,{className:"text-red-800",children:"Link Student to Parent"}),(0,a.jsx)(l.DialogDescription,{children:"Associate a student with this parent/guardian"})]}),(0,a.jsxs)("form",{onSubmit:eg,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Select Student *"}),(0,a.jsxs)(d.Select,{value:W.student_id,onValueChange:e=>X({...W,student_id:e}),children:[(0,a.jsx)(d.SelectTrigger,{children:(0,a.jsx)(d.SelectValue,{placeholder:"Choose a student"})}),(0,a.jsx)(d.SelectContent,{children:T.map(e=>(0,a.jsxs)(d.SelectItem,{value:e.id,children:[e.first_name," ",e.last_name," - ",e.student_number]},e.id))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.Label,{children:"Relationship *"}),(0,a.jsxs)(d.Select,{value:W.relationship_type,onValueChange:e=>X({...W,relationship_type:e}),children:[(0,a.jsx)(d.SelectTrigger,{children:(0,a.jsx)(d.SelectValue,{})}),(0,a.jsxs)(d.SelectContent,{children:[(0,a.jsx)(d.SelectItem,{value:"parent",children:"Parent"}),(0,a.jsx)(d.SelectItem,{value:"father",children:"Father"}),(0,a.jsx)(d.SelectItem,{value:"mother",children:"Mother"}),(0,a.jsx)(d.SelectItem,{value:"guardian",children:"Guardian"}),(0,a.jsx)(d.SelectItem,{value:"grandparent",children:"Grandparent"}),(0,a.jsx)(d.SelectItem,{value:"aunt",children:"Aunt"}),(0,a.jsx)(d.SelectItem,{value:"uncle",children:"Uncle"}),(0,a.jsx)(d.SelectItem,{value:"sibling",children:"Sibling"}),(0,a.jsx)(d.SelectItem,{value:"other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"is_primary",checked:W.is_primary,onChange:e=>X({...W,is_primary:e.target.checked}),className:"rounded"}),(0,a.jsx)(i.Label,{htmlFor:"is_primary",children:"Primary Contact"})]}),ec&&(0,a.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded",children:ec}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>O(!1),disabled:es,children:"Cancel"}),(0,a.jsx)(s.Button,{type:"submit",className:"bg-red-800 hover:bg-red-700",disabled:es,children:es?"Linking...":"Link Student"})]})]})]})}),(0,a.jsxs)(r.Card,{className:"shadow-md",children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(r.CardTitle,{className:"text-red-800",children:["All Parents (",eu.length,")"]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(n.Input,{placeholder:"Search parents...",className:"pl-10 w-64",value:L,onChange:e=>A(e.target.value)})]})})]})}),(0,a.jsx)(r.CardContent,{children:E?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-800 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading parents..."})]}):(0,a.jsxs)(o.Table,{children:[(0,a.jsx)(o.TableHeader,{children:(0,a.jsxs)(o.TableRow,{children:[(0,a.jsx)(o.TableHead,{children:"Name"}),(0,a.jsx)(o.TableHead,{children:"Email"}),(0,a.jsx)(o.TableHead,{children:"Phone"}),(0,a.jsx)(o.TableHead,{children:"Children"}),(0,a.jsx)(o.TableHead,{children:"Status"}),(0,a.jsx)(o.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(o.TableBody,{children:eu.length>0?eu.map(e=>(0,a.jsxs)(o.TableRow,{children:[(0,a.jsx)(o.TableCell,{className:"font-medium",children:`${e.first_name} ${e.last_name}`}),(0,a.jsx)(o.TableCell,{children:e.email}),(0,a.jsx)(o.TableCell,{children:e.phone_number||"N/A"}),(0,a.jsx)(o.TableCell,{children:e.children&&e.children.length>0?(0,a.jsxs)(t.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[e.children.length," ",1===e.children.length?"child":"children"]}):(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"No children linked"})}),(0,a.jsx)(o.TableCell,{children:(0,a.jsx)(t.Badge,{className:"bg-green-100 text-green-800",children:e.status||"Active"})}),(0,a.jsx)(o.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(s.Button,{variant:"outline",size:"sm",onClick:()=>{q(e),M(!0)},children:(0,a.jsx)(p.Eye,{className:"w-4 h-4"})}),(0,a.jsx)(s.Button,{variant:"outline",size:"sm",onClick:()=>{X({parent_id:e.id,student_id:"",relationship_type:"parent",is_primary:!0}),O(!0)},children:(0,a.jsx)(b.Users,{className:"w-4 h-4"})}),(0,a.jsx)(s.Button,{variant:"outline",size:"sm",onClick:()=>{K({id:e.id,first_name:e.first_name,last_name:e.last_name,middle_name:e.middle_name||"",email:e.email,phone_number:e.phone_number||"",address:e.address||""}),I(!0)},children:(0,a.jsx)(x.Edit,{className:"w-4 h-4"})}),(0,a.jsx)(s.Button,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>ej(e.id,`${e.first_name} ${e.last_name}`),disabled:ea,children:(0,a.jsx)(g.Trash2,{className:"w-4 h-4"})})]})})]},e.id)):(0,a.jsx)(o.TableRow,{children:(0,a.jsx)(o.TableCell,{colSpan:6,className:"text-center text-gray-500 py-8",children:"No parents found"})})})]})})]})]})]})}e.s(["default",()=>S])}]);