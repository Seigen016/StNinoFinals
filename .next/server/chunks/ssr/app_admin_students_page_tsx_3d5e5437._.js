module.exports=[15295,a=>{"use strict";var b=a.i(95526),c=a.i(54161),d=a.i(40695),e=a.i(3130),f=a.i(65733),g=a.i(5522),h=a.i(17171),i=a.i(87682),j=a.i(53071),k=a.i(88237),l=a.i(35393),m=a.i(82804),n=a.i(62159),o=a.i(63192),p=a.i(77889),q=a.i(5378),r=a.i(21753),s=a.i(75023),t=a.i(4640),u=a.i(21113),v=a.i(19770),w=a.i(30924);function x(){let{admin:a,loading:x}=(0,w.useAuth)(),[y,z]=(0,u.useState)([]),[A,B]=(0,u.useState)(!1),[C,D]=(0,u.useState)(""),[E,F]=(0,u.useState)(!1),[G,H]=(0,u.useState)(!1),[I,J]=(0,u.useState)(!1),[K,L]=(0,u.useState)(null),{showAlert:M}=(0,l.useAlert)(),{showConfirm:N}=(0,m.useConfirm)(),[O,P]=(0,u.useState)({first_name:"",last_name:"",middle_name:"",student_number:"",grade_level:"",section:"",email:"",phone_number:"",date_of_birth:"",address:"",rfid:""}),[Q,R]=(0,u.useState)({id:"",first_name:"",last_name:"",middle_name:"",student_number:"",grade_level:"",section:"",email:"",phone_number:"",date_of_birth:"",address:"",rfid:""}),[S,T]=(0,u.useState)(!1),[U,V]=(0,u.useState)(!1),[W,X]=(0,u.useState)(!1),[Y,Z]=(0,u.useState)(""),[$,_]=(0,u.useState)(""),aa=async()=>{B(!0);try{let a=await fetch("/api/admin/students"),b=await a.json();b.success&&b.students&&z(b.students)}catch(a){console.error("Error fetching students:",a)}finally{B(!1)}};(0,u.useEffect)(()=>{aa()},[]);let ab=y.filter(a=>`${a.first_name} ${a.last_name} ${a.student_number}`.toLowerCase().includes(C.toLowerCase())),ac=async a=>{a.preventDefault(),T(!0),Z("");try{let a=`Student${Math.random().toString(36).slice(-8)}${Math.floor(100*Math.random())}`,b=await fetch("/api/admin/students",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...O,password:a})}),c=await b.json();if(!c.success)throw Error(c.error||"Failed to add student");await aa(),P({first_name:"",last_name:"",middle_name:"",student_number:"",grade_level:"",section:"",email:"",phone_number:"",date_of_birth:"",address:"",rfid:""}),F(!1),M({message:`Student added successfully!

Login Credentials:
Email: ${O.email}
Password: ${a}

Please save these credentials!`,type:"success"})}catch(a){Z(a?.message||"Failed to add student.")}finally{T(!1)}},ad=async a=>{a.preventDefault(),V(!0),_("");try{let a=await fetch(`/api/admin/students/${Q.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}),b=await a.json();if(!b.success)throw Error(b.error||"Failed to update student");await aa(),H(!1),M({message:"Student updated successfully!",type:"success"})}catch(a){_(a?.message||"Failed to update student.")}finally{V(!1)}},ae=async(a,b)=>{if(await N({message:`Are you sure you want to delete ${b}? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"destructive"})){X(!0);try{let b=await fetch(`/api/admin/students/${a}`,{method:"DELETE"}),c=await b.json();if(!c.success)throw Error(c.error||"Failed to delete student");await aa(),M({message:"Student deleted successfully!",type:"success"})}catch(a){M({message:a?.message||"Failed to delete student.",type:"error"})}finally{X(!1)}}};return x||!a?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-red-800 border-t-transparent"}),(0,b.jsx)("p",{className:"mt-4 text-red-800 font-medium",children:"Loading..."})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-red-50",children:[(0,b.jsx)(v.AdminHeader,{admin:a}),(0,b.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center gap-4",children:[(0,b.jsx)(t.default,{href:"/admin",children:(0,b.jsxs)(d.Button,{variant:"ghost",size:"sm",className:"hover:bg-red-50",children:[(0,b.jsx)(n.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Back"]})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-red-800",children:"Student Management"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage student records and information"})]}),(0,b.jsxs)(f.Dialog,{open:E,onOpenChange:F,children:[(0,b.jsx)(f.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{className:"bg-red-800 hover:bg-red-700",children:[(0,b.jsx)(s.UserPlus,{className:"w-4 h-4 mr-2"}),"Add Student"]})}),(0,b.jsxs)(f.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{className:"text-red-800",children:"Add New Student"}),(0,b.jsx)(f.DialogDescription,{children:"Enter student information to create a new account"})]}),(0,b.jsxs)("form",{onSubmit:ac,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"First Name *"}),(0,b.jsx)(g.Input,{value:O.first_name,onChange:a=>P({...O,first_name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Last Name *"}),(0,b.jsx)(g.Input,{value:O.last_name,onChange:a=>P({...O,last_name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Middle Name"}),(0,b.jsx)(g.Input,{value:O.middle_name,onChange:a=>P({...O,middle_name:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Student Number *"}),(0,b.jsx)(g.Input,{value:O.student_number,onChange:a=>P({...O,student_number:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Grade Level *"}),(0,b.jsxs)(i.Select,{value:O.grade_level,onValueChange:a=>P({...O,grade_level:a}),children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{placeholder:"Select grade"})}),(0,b.jsx)(i.SelectContent,{children:Array.from({length:12},(a,c)=>(0,b.jsxs)(i.SelectItem,{value:`Grade ${c+1}`,children:["Grade ",c+1]},c+1))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Section"}),(0,b.jsx)(g.Input,{value:O.section,onChange:a=>P({...O,section:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Email *"}),(0,b.jsx)(g.Input,{type:"email",value:O.email,onChange:a=>P({...O,email:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Phone Number"}),(0,b.jsx)(g.Input,{value:O.phone_number,onChange:a=>P({...O,phone_number:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Date of Birth"}),(0,b.jsx)(g.Input,{type:"date",value:O.date_of_birth,onChange:a=>P({...O,date_of_birth:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"RFID Card Number"}),(0,b.jsx)(g.Input,{value:O.rfid,onChange:a=>P({...O,rfid:a.target.value}),placeholder:"Enter RFID card number"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)(h.Label,{children:"Address"}),(0,b.jsx)(g.Input,{value:O.address,onChange:a=>P({...O,address:a.target.value})})]})]}),Y&&(0,b.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded",children:Y}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>F(!1),disabled:S,children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",className:"bg-red-800 hover:bg-red-700",disabled:S,children:S?"Adding...":"Add Student"})]})]})]})]})]}),(0,b.jsx)(f.Dialog,{open:G,onOpenChange:H,children:(0,b.jsxs)(f.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(f.DialogHeader,{children:[(0,b.jsx)(f.DialogTitle,{className:"text-red-800",children:"Edit Student"}),(0,b.jsx)(f.DialogDescription,{children:"Update student information"})]}),(0,b.jsxs)("form",{onSubmit:ad,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"First Name *"}),(0,b.jsx)(g.Input,{value:Q.first_name,onChange:a=>R({...Q,first_name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Last Name *"}),(0,b.jsx)(g.Input,{value:Q.last_name,onChange:a=>R({...Q,last_name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Middle Name"}),(0,b.jsx)(g.Input,{value:Q.middle_name,onChange:a=>R({...Q,middle_name:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Student Number *"}),(0,b.jsx)(g.Input,{value:Q.student_number,onChange:a=>R({...Q,student_number:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Grade Level *"}),(0,b.jsxs)(i.Select,{value:Q.grade_level,onValueChange:a=>R({...Q,grade_level:a}),children:[(0,b.jsx)(i.SelectTrigger,{children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsx)(i.SelectContent,{children:Array.from({length:12},(a,c)=>(0,b.jsxs)(i.SelectItem,{value:`Grade ${c+1}`,children:["Grade ",c+1]},c+1))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Section"}),(0,b.jsx)(g.Input,{value:Q.section,onChange:a=>R({...Q,section:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Email *"}),(0,b.jsx)(g.Input,{type:"email",value:Q.email,onChange:a=>R({...Q,email:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Phone Number"}),(0,b.jsx)(g.Input,{value:Q.phone_number,onChange:a=>R({...Q,phone_number:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"Date of Birth"}),(0,b.jsx)(g.Input,{type:"date",value:Q.date_of_birth,onChange:a=>R({...Q,date_of_birth:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{children:"RFID Card Number"}),(0,b.jsx)(g.Input,{value:Q.rfid,onChange:a=>R({...Q,rfid:a.target.value}),placeholder:"Enter RFID card number"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)(h.Label,{children:"Address"}),(0,b.jsx)(g.Input,{value:Q.address,onChange:a=>R({...Q,address:a.target.value})})]})]}),$&&(0,b.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded",children:$}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>H(!1),disabled:U,children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",className:"bg-red-800 hover:bg-red-700",disabled:U,children:U?"Updating...":"Update Student"})]})]})]})}),(0,b.jsx)(j.Sheet,{open:I,onOpenChange:J,children:(0,b.jsxs)(j.SheetContent,{side:"right",className:"w-full sm:max-w-lg overflow-y-auto",children:[(0,b.jsxs)(j.SheetHeader,{children:[(0,b.jsx)(j.SheetTitle,{className:"text-red-800",children:"Student Details"}),(0,b.jsx)(j.SheetDescription,{children:"View complete student information"})]}),K&&(0,b.jsx)("div",{className:"space-y-6 mt-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Full Name"}),(0,b.jsx)("p",{className:"text-base font-semibold",children:`${K.first_name} ${K.middle_name||""} ${K.last_name}`.trim()})]}),(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Student Number"}),(0,b.jsx)("p",{className:"text-base font-mono",children:K.student_number})]}),(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Grade Level"}),(0,b.jsx)("p",{className:"text-base",children:K.grade_level})]}),(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Section"}),(0,b.jsx)("p",{className:"text-base",children:K.section||"N/A"})]}),(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),(0,b.jsx)("p",{className:"text-base",children:K.email})]}),(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Phone Number"}),(0,b.jsx)("p",{className:"text-base",children:K.phone_number||"N/A"})]}),(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Date of Birth"}),(0,b.jsx)("p",{className:"text-base",children:K.date_of_birth||"N/A"})]}),(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"RFID Card"}),K.rfid?(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(c.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Assigned"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 font-mono",children:K.rfid})]}):(0,b.jsx)(c.Badge,{variant:"outline",className:"bg-gray-50 text-gray-600",children:"Not Assigned"})]}),(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Status"}),(0,b.jsx)(c.Badge,{className:"bg-green-100 text-green-800",children:K.status})]}),(0,b.jsxs)("div",{className:"pb-3 border-b",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Address"}),(0,b.jsx)("p",{className:"text-base",children:K.address||"N/A"})]})]})})]})}),(0,b.jsxs)(e.Card,{className:"shadow-md",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(e.CardTitle,{className:"text-red-800",children:["All Students (",ab.length,")"]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,b.jsx)(g.Input,{placeholder:"Search students...",className:"pl-10 w-64",value:C,onChange:a=>D(a.target.value)})]})})]})}),(0,b.jsx)(e.CardContent,{children:A?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-800 mx-auto"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading students..."})]}):(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{children:"Student Number"}),(0,b.jsx)(k.TableHead,{children:"Name"}),(0,b.jsx)(k.TableHead,{children:"Grade Level"}),(0,b.jsx)(k.TableHead,{children:"Section"}),(0,b.jsx)(k.TableHead,{children:"RFID"}),(0,b.jsx)(k.TableHead,{children:"Email"}),(0,b.jsx)(k.TableHead,{children:"Status"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(k.TableBody,{children:ab.length>0?ab.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{className:"font-medium",children:a.student_number}),(0,b.jsx)(k.TableCell,{children:`${a.first_name} ${a.last_name}`}),(0,b.jsx)(k.TableCell,{children:a.grade_level}),(0,b.jsx)(k.TableCell,{children:a.section||"N/A"}),(0,b.jsx)(k.TableCell,{children:a.rfid?(0,b.jsx)(c.Badge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:a.rfid}):(0,b.jsx)("span",{className:"text-gray-400 text-sm",children:"Not assigned"})}),(0,b.jsx)(k.TableCell,{children:a.email}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(c.Badge,{className:"bg-green-100 text-green-800",children:a.status||"Active"})}),(0,b.jsx)(k.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>{L(a),J(!0)},children:(0,b.jsx)(p.Eye,{className:"w-4 h-4"})}),(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>{R({id:a.id,first_name:a.first_name,last_name:a.last_name,middle_name:a.middle_name||"",student_number:a.student_number,grade_level:a.grade_level,section:a.section||"",email:a.email,phone_number:a.phone_number||"",date_of_birth:a.date_of_birth||"",address:a.address||"",rfid:a.rfid||""}),H(!0)},children:(0,b.jsx)(o.Edit,{className:"w-4 h-4"})}),(0,b.jsx)(d.Button,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>ae(a.id,`${a.first_name} ${a.last_name}`),disabled:W,children:(0,b.jsx)(r.Trash2,{className:"w-4 h-4"})})]})})]},a.id)):(0,b.jsx)(k.TableRow,{children:(0,b.jsx)(k.TableCell,{colSpan:8,className:"text-center text-gray-500 py-8",children:"No students found"})})})]})})]})]})]})}a.s(["default",()=>x])}];

//# sourceMappingURL=app_admin_students_page_tsx_3d5e5437._.js.map