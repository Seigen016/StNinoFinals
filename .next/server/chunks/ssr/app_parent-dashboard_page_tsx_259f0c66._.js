module.exports=[75263,a=>{"use strict";var b=a.i(95526),c=a.i(40695),d=a.i(3130),e=a.i(65733),f=a.i(5522),g=a.i(17171),h=a.i(87682),i=a.i(21958),j=a.i(7291),k=a.i(35393),l=a.i(82804),m=a.i(85382),n=a.i(67162),o=a.i(77889),p=a.i(21672),q=a.i(83518),r=a.i(64213),s=a.i(82819),t=a.i(63959),u=a.i(75023),v=a.i(41819),w=a.i(4640),x=a.i(60422),y=a.i(21113),z=a.i(54161),A=a.i(2150),B=a.i(36562),C=a.i(78644),D=a.i(8700),E=a.i(79259);function F({children:a,childStats:c,childGrades:e,childAttendance:f,announcements:g}){let[i,j]=(0,y.useState)(a.length>0?String(a[0].id):""),k=a.find(a=>String(a.id)===i),l=i?c[i]:null,o=i&&e[i]||[],p=i&&f[i]||[],q=i&&g[i]||[],r=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return 0===a.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(t.User,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Children Linked"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Add your children to view their academic progress"})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.Card,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Parent Portal"}),(0,b.jsx)(d.CardDescription,{children:"Monitor your child's academic journey"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,b.jsxs)("button",{className:"p-3 bg-white border border-blue-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-all",children:[(0,b.jsx)(C.BookOpen,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),(0,b.jsx)("p",{className:"text-xs font-medium",children:"Check Grades"})]}),(0,b.jsxs)("button",{className:"p-3 bg-white border border-purple-200 rounded-lg hover:bg-purple-50 hover:border-purple-300 transition-all",children:[(0,b.jsx)(E.TrendingUp,{className:"h-6 w-6 mx-auto mb-1 text-purple-600"}),(0,b.jsx)("p",{className:"text-xs font-medium",children:"View Progress"})]}),(0,b.jsxs)("button",{className:"p-3 bg-white border border-green-200 rounded-lg hover:bg-green-50 hover:border-green-300 transition-all",children:[(0,b.jsx)(m.Calendar,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),(0,b.jsx)("p",{className:"text-xs font-medium",children:"Enrollment Status"})]})]})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Select Child"}),(0,b.jsx)(d.CardDescription,{children:"View academic progress and attendance"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)(h.Select,{value:i,onValueChange:j,children:[(0,b.jsx)(h.SelectTrigger,{className:"w-full",children:(0,b.jsx)(h.SelectValue,{placeholder:"Select a child"})}),(0,b.jsx)(h.SelectContent,{children:a.map(a=>(0,b.jsxs)(h.SelectItem,{value:String(a.id),children:[a.name," - ",a.grade_level," ",a.section]},a.id))})]})})]}),k&&l&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)(d.Card,{className:"border-l-4 border-l-blue-500",children:[(0,b.jsxs)(d.CardHeader,{className:"pb-3",children:[(0,b.jsx)(d.CardDescription,{children:"Current GPA"}),(0,b.jsx)(d.CardTitle,{className:"text-3xl",children:l.gpa.toFixed(2)})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,b.jsx)(E.TrendingUp,{className:"mr-1 h-4 w-4"}),"Academic Performance"]})})]}),(0,b.jsxs)(d.Card,{className:"border-l-4 border-l-green-500",children:[(0,b.jsxs)(d.CardHeader,{className:"pb-3",children:[(0,b.jsx)(d.CardDescription,{children:"Attendance Rate"}),(0,b.jsxs)(d.CardTitle,{className:"text-3xl",children:[l.attendanceRate.toFixed(1),"%"]})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(A.Progress,{value:l.attendanceRate,className:"h-2"})})]}),(0,b.jsxs)(d.Card,{className:"border-l-4 border-l-purple-500",children:[(0,b.jsxs)(d.CardHeader,{className:"pb-3",children:[(0,b.jsx)(d.CardDescription,{children:"Behavior Score"}),(0,b.jsxs)(d.CardTitle,{className:"text-3xl",children:[l.behaviorScore.toFixed(0),"/100"]})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(A.Progress,{value:l.behaviorScore,className:"h-2"})})]}),(0,b.jsxs)(d.Card,{className:"border-l-4 border-l-orange-500",children:[(0,b.jsxs)(d.CardHeader,{className:"pb-3",children:[(0,b.jsx)(d.CardDescription,{children:"Pending Tasks"}),(0,b.jsx)(d.CardTitle,{className:"text-3xl",children:l.pendingTasks})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,b.jsx)(B.AlertCircle,{className:"mr-1 h-4 w-4"}),"Assignments Due"]})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(C.BookOpen,{className:"h-5 w-5"}),"Recent Grades"]}),(0,b.jsx)(d.CardDescription,{children:"Latest academic results"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[o.slice(0,6).map((a,c)=>{let d;return(0,b.jsxs)("div",{className:"flex items-center justify-between border-b pb-2 last:border-0",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-medium text-sm",children:a.subject}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Updated ",r(a.lastUpdated)]})]}),(0,b.jsx)("span",{className:`text-2xl font-bold ${(d=parseFloat(a.grade))>=95?"text-green-600":d>=90?"text-blue-600":d>=85?"text-yellow-600":"text-red-600"}`,children:a.grade})]},c)}),0===o.length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No grades available"})]})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Calendar,{className:"h-5 w-5"}),"Recent Attendance"]}),(0,b.jsx)(d.CardDescription,{children:"Last 7 days"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[p.slice(0,7).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between border-b pb-2 last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(a=>{switch(a){case"present":return(0,b.jsx)(D.CheckCircle2,{className:"h-5 w-5 text-green-600"});case"late":return(0,b.jsx)(n.Clock,{className:"h-5 w-5 text-yellow-600"});case"absent":return(0,b.jsx)(B.AlertCircle,{className:"h-5 w-5 text-red-600"});default:return null}})(a.status),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm capitalize",children:a.status}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:r(a.date)})]})]}),a.time&&(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:a.time})]},c)),0===p.length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No attendance records"})]})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s.MessageSquare,{className:"h-5 w-5"}),"School Announcements"]}),(0,b.jsx)(d.CardDescription,{children:"Important updates from teachers and school"})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[q.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[(0,b.jsx)("div",{className:`mt-1 rounded-full p-1 ${"high"===a.priority?"bg-red-100":"medium"===a.priority?"bg-yellow-100":"bg-blue-100"}`,children:(0,b.jsx)(B.AlertCircle,{className:`h-4 w-4 ${"high"===a.priority?"text-red-600":"medium"===a.priority?"text-yellow-600":"text-blue-600"}`})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,b.jsx)("h4",{className:"font-medium",children:a.title}),(0,b.jsx)(z.Badge,{variant:"high"===a.priority?"destructive":"secondary",children:a.priority})]}),a.content&&(0,b.jsx)("p",{className:"text-sm text-gray-700 mt-1 mb-2",children:a.content}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["From: ",a.from||"School Admin"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:r(a.date)})]})]},a.id)),0===q.length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No announcements"})]})})]})]})]})}function G(){let a=(0,x.useRouter)(),[z,A]=(0,y.useState)(null),[B,C]=(0,y.useState)([]),[D,E]=(0,y.useState)("dashboard"),[G,H]=(0,y.useState)(!0),[I,J]=(0,y.useState)(!1),[K,L]=(0,y.useState)(!1),[M,N]=(0,y.useState)(!1),[O,P]=(0,y.useState)(""),[Q,R]=(0,y.useState)("parent"),[S,T]=(0,y.useState)(""),{showAlert:U}=(0,k.useAlert)(),{showConfirm:V}=(0,l.useConfirm)(),[W,X]=(0,y.useState)({}),[Y,Z]=(0,y.useState)({}),[$,_]=(0,y.useState)({}),[aa,ab]=(0,y.useState)({}),ac=async a=>{try{let b=await fetch(`/api/parent/children?parent_id=${a}`),c=await b.json();c.success&&c.children&&(C(c.children),localStorage.setItem("parentChildren",JSON.stringify(c.children)),await ad(c.children))}catch(a){console.error("Error fetching children:",a)}},ad=async a=>{J(!0);let b={},c={},d={},e={};await Promise.all(a.map(async a=>{let f=String(a.id);try{let a=await fetch(`/api/parent/student-stats?student_id=${f}`),c=await a.json();c.success?b[f]=c.stats:b[f]={gpa:0,attendanceRate:0,behaviorScore:0,pendingTasks:0}}catch(a){console.error(`Error fetching stats for child ${f}:`,a),b[f]={gpa:0,attendanceRate:0,behaviorScore:0,pendingTasks:0}}try{let a=await fetch(`/api/parent/student-grades?student_id=${f}`),b=await a.json();b.success?c[f]=b.grades:c[f]=[]}catch(a){console.error(`Error fetching grades for child ${f}:`,a),c[f]=[]}try{let a=await fetch(`/api/parent/student-attendance?student_id=${f}&days=7`),b=await a.json();b.success?d[f]=b.attendance:d[f]=[]}catch(a){console.error(`Error fetching attendance for child ${f}:`,a),d[f]=[]}try{let a=await fetch(`/api/parent/announcements?student_id=${f}`),b=await a.json();b.success?e[f]=b.announcements:e[f]=[]}catch(a){console.error(`Error fetching announcements for child ${f}:`,a),e[f]=[]}})),X(b),Z(c),_(d),ab(e),J(!1)};(0,y.useEffect)(()=>{let b=localStorage.getItem("parent"),c=localStorage.getItem("parentChildren");if(!b)return void a.push("/");try{let a=JSON.parse(b);if(A(a),c){let a=JSON.parse(c);C(a),ad(a)}a.id&&ac(a.id)}catch(b){console.error("Error parsing parent data:",b),a.push("/")}finally{H(!1)}},[a]);let ae=async()=>{await V({message:"Are you sure you want to log out?",confirmText:"Logout",cancelText:"Cancel",variant:"destructive"})&&(await j.supabase.auth.signOut(),localStorage.removeItem("parent"),localStorage.removeItem("parentChildren"),a.push("/"))},af=async()=>{if(!O.trim())return void T("Please enter a student number");L(!0),T("");try{let a=await fetch("/api/parent/link-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parent_id:z.id,student_number:O.trim(),relationship_type:Q})}),b=await a.json();if(!a.ok||!b.success)return void T(b.error||"Failed to add student");let c={id:b.student.id,name:b.student.name,student_id:b.student.student_number,grade_level:b.student.grade_level,section:b.student.section,email:b.student.email},d=[...B,c];C(d),localStorage.setItem("parentChildren",JSON.stringify(d)),P(""),R("parent"),N(!1),z.id&&await ac(z.id),U({message:"Student added successfully!",type:"success"})}catch(a){console.error("Error adding student:",a),T("Failed to add student. Please try again.")}finally{L(!1)}},ag=a=>{localStorage.setItem("student",JSON.stringify(a)),window.open("/student?parentView=true","_blank")};return G?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-red-800 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading parent dashboard..."})]})}):z&&0!==B.length?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white shadow-md border-b-4 border-red-800",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)(v.default,{src:"/logo.png",alt:"Sto Ni単o de Praga Academy Logo",width:60,height:60,className:"rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-red-800",children:"Parent Dashboard"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Sto Ni単o de Praga Academy"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)(e.Dialog,{open:M,onOpenChange:N,children:[(0,b.jsx)(e.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(c.Button,{variant:"outline",className:"border-green-600 text-green-600 hover:bg-green-600 hover:text-white bg-transparent",children:[(0,b.jsx)(u.UserPlus,{className:"w-4 h-4 mr-2"}),"Add Child"]})}),(0,b.jsxs)(e.DialogContent,{children:[(0,b.jsxs)(e.DialogHeader,{children:[(0,b.jsx)(e.DialogTitle,{children:"Add Your Child"}),(0,b.jsx)(e.DialogDescription,{children:"Enter your child's student number to link them to your account."})]}),(0,b.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"studentNumber",children:"Student Number"}),(0,b.jsx)(f.Input,{id:"studentNumber",placeholder:"e.g., SNPA-2024-001",value:O,onChange:a=>P(a.target.value),disabled:K})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"relationship",children:"Relationship"}),(0,b.jsxs)(h.Select,{value:Q,onValueChange:R,disabled:K,children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"parent",children:"Parent"}),(0,b.jsx)(h.SelectItem,{value:"guardian",children:"Guardian"}),(0,b.jsx)(h.SelectItem,{value:"mother",children:"Mother"}),(0,b.jsx)(h.SelectItem,{value:"father",children:"Father"})]})]})]}),S&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:S}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(c.Button,{onClick:af,disabled:K,className:"flex-1 bg-red-800 hover:bg-red-700",children:K?"Adding...":"Add Student"}),(0,b.jsx)(c.Button,{variant:"outline",onClick:()=>{N(!1),P(""),T("")},disabled:K,children:"Cancel"})]})]})]})]}),(0,b.jsx)(w.default,{href:"/",children:(0,b.jsxs)(c.Button,{variant:"outline",className:"border-red-800 text-red-800 hover:bg-red-800 hover:text-white bg-transparent",children:[(0,b.jsx)(p.Home,{className:"w-4 h-4 mr-2"}),"Home"]})}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"font-medium text-red-800",children:z.name||z.email||"Parent/Guardian"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Parent/Guardian"})]}),(0,b.jsxs)(c.Button,{onClick:ae,variant:"outline",className:"border-red-800 text-red-800 hover:bg-red-800 hover:text-white bg-transparent",children:[(0,b.jsx)(r.LogOut,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)(i.Tabs,{value:D,onValueChange:E,className:"w-full",children:[(0,b.jsxs)(i.TabsList,{className:"grid w-full grid-cols-5 mb-8",children:[(0,b.jsxs)(i.TabsTrigger,{value:"dashboard",className:"data-[state=active]:bg-red-800 data-[state=active]:text-white",children:[(0,b.jsx)(q.LayoutDashboard,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),(0,b.jsxs)(i.TabsTrigger,{value:"children",className:"data-[state=active]:bg-red-800 data-[state=active]:text-white",children:[(0,b.jsx)(t.User,{className:"w-4 h-4 mr-2"}),"My Children"]}),(0,b.jsxs)(i.TabsTrigger,{value:"attendance",className:"data-[state=active]:bg-red-800 data-[state=active]:text-white",children:[(0,b.jsx)(n.Clock,{className:"w-4 h-4 mr-2"}),"Attendance"]}),(0,b.jsxs)(i.TabsTrigger,{value:"messages",className:"data-[state=active]:bg-red-800 data-[state=active]:text-white",children:[(0,b.jsx)(s.MessageSquare,{className:"w-4 h-4 mr-2"}),"Messages"]}),(0,b.jsxs)(i.TabsTrigger,{value:"schedule",className:"data-[state=active]:bg-red-800 data-[state=active]:text-white",children:[(0,b.jsx)(m.Calendar,{className:"w-4 h-4 mr-2"}),"Schedule"]})]}),(0,b.jsxs)(i.TabsContent,{value:"dashboard",className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome, ",z.name||z.email||"Parent/Guardian","!"]}),(0,b.jsx)("p",{className:"text-gray-600",children:"Monitor your children's academic progress and school activities."})]}),I&&(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-800 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading dashboard data..."})]}),!I&&(0,b.jsx)(F,{children:B,childStats:W,childGrades:Y,childAttendance:$,announcements:aa})]}),(0,b.jsxs)(i.TabsContent,{value:"children",className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"My Children"}),(0,b.jsx)("p",{className:"text-gray-600",children:"View and access your children's student portals."})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(a=>(0,b.jsxs)(d.Card,{className:"border-red-200 hover:shadow-lg transition-shadow",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center text-white font-bold text-xl",children:a.photo||a.name?.charAt(0)||"S"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(d.CardTitle,{className:"text-red-800",children:a.name}),(0,b.jsxs)(d.CardDescription,{children:[a.grade_level||"N/A"," - ",a.section||"N/A"]})]})]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Student ID"}),(0,b.jsx)("p",{className:"font-medium",children:a.student_id||"N/A"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Email"}),(0,b.jsx)("p",{className:"font-medium text-sm",children:a.email||"N/A"})]}),(0,b.jsxs)(c.Button,{onClick:()=>ag(a),className:"w-full bg-red-800 hover:bg-red-700",children:[(0,b.jsx)(o.Eye,{className:"w-4 h-4 mr-2"}),"View Student Portal"]})]})})]},a.id))})]}),(0,b.jsxs)(i.TabsContent,{value:"attendance",className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Attendance Records"}),(0,b.jsx)("p",{className:"text-gray-600",children:"View detailed attendance information for each child."})]}),(0,b.jsx)("div",{className:"space-y-6",children:B.map(a=>{let c=String(a.id),e=$[c]||[],f=W[c];return(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{className:"text-red-800",children:a.name}),(0,b.jsxs)(d.CardDescription,{children:[a.grade_level||"N/A"," - ",a.section||"N/A"]})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[f&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Overall Attendance Rate"}),(0,b.jsxs)("span",{className:"text-sm font-bold text-red-800",children:[f.attendanceRate.toFixed(1),"%"]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,b.jsx)("div",{className:"bg-red-600 h-3 rounded-full transition-all",style:{width:`${f.attendanceRate}%`}})})]}),e.length>0?(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["Last 7 days: ",e.filter(a=>"present"===a.status).length," present,"," ",e.filter(a=>"late"===a.status).length," late,"," ",e.filter(a=>"absent"===a.status).length," absent"]}):(0,b.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,b.jsx)(n.Clock,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),(0,b.jsx)("p",{children:"No attendance records available"})]})]})})]},a.id)})})]}),(0,b.jsxs)(i.TabsContent,{value:"messages",className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Messages & Announcements"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Communications from teachers and school administration."})]}),(0,b.jsx)("div",{className:"space-y-4",children:B.map(a=>{let c=aa[String(a.id)]||[];return(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-red-800",children:["Messages for ",a.name]}),(0,b.jsxs)(d.CardDescription,{children:[a.grade_level||"N/A"," - ",a.section||"N/A"]})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:c.length>0?c.map(a=>(0,b.jsxs)("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:a.date?new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""})]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded flex-shrink-0 ${"high"===a.priority?"bg-red-100 text-red-800":"medium"===a.priority?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:a.priority})]}),a.content&&(0,b.jsx)("p",{className:"text-sm text-gray-700 mt-2",children:a.content}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["From: ",a.from||"School Admin"]})]},a.id)):(0,b.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No messages yet"})})})]},a.id)})})]}),(0,b.jsxs)(i.TabsContent,{value:"schedule",className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Class Schedules"}),(0,b.jsx)("p",{className:"text-gray-600",children:"View your children's class schedules."})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:B.map(a=>(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"text-red-800",children:[a.name,"'s Schedule"]}),(0,b.jsxs)(d.CardDescription,{children:[a.grade_level||"N/A"," - ",a.section||"N/A"]})]}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)(m.Calendar,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,b.jsx)("p",{children:"Schedule information available in student portal."}),(0,b.jsxs)(c.Button,{onClick:()=>ag(a),variant:"outline",className:"mt-4",children:[(0,b.jsx)(o.Eye,{className:"w-4 h-4 mr-2"}),"View Student Portal"]})]})})]},a.id))})]})]})})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white shadow-md border-b-4 border-red-800",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)(v.default,{src:"/logo.png",alt:"Sto Ni単o de Praga Academy Logo",width:60,height:60,className:"rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-red-800",children:"Parent Dashboard"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Sto Ni単o de Praga Academy"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)(w.default,{href:"/",children:(0,b.jsxs)(c.Button,{variant:"outline",className:"border-red-800 text-red-800 hover:bg-red-800 hover:text-white bg-transparent",children:[(0,b.jsx)(p.Home,{className:"w-4 h-4 mr-2"}),"Home"]})}),(0,b.jsxs)(c.Button,{onClick:ae,variant:"outline",className:"border-red-800 text-red-800 hover:bg-red-800 hover:text-white bg-transparent",children:[(0,b.jsx)(r.LogOut,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-16",children:(0,b.jsxs)(d.Card,{className:"max-w-2xl mx-auto",children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{className:"text-red-800",children:"No Children Linked"}),(0,b.jsx)(d.CardDescription,{children:"You don't have any children linked to your account yet. Please add your child to get started."})]}),(0,b.jsx)(d.CardContent,{className:"space-y-4",children:(0,b.jsxs)(e.Dialog,{open:M,onOpenChange:N,children:[(0,b.jsx)(e.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(c.Button,{className:"w-full bg-red-800 hover:bg-red-700",children:[(0,b.jsx)(u.UserPlus,{className:"w-4 h-4 mr-2"}),"Add Your Child"]})}),(0,b.jsxs)(e.DialogContent,{children:[(0,b.jsxs)(e.DialogHeader,{children:[(0,b.jsx)(e.DialogTitle,{children:"Add Your Child"}),(0,b.jsx)(e.DialogDescription,{children:"Enter your child's student number to link them to your account."})]}),(0,b.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"studentNumber",children:"Student Number"}),(0,b.jsx)(f.Input,{id:"studentNumber",placeholder:"e.g., SNPA-2024-001",value:O,onChange:a=>P(a.target.value),disabled:K})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"relationship",children:"Relationship"}),(0,b.jsxs)(h.Select,{value:Q,onValueChange:R,disabled:K,children:[(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"parent",children:"Parent"}),(0,b.jsx)(h.SelectItem,{value:"guardian",children:"Guardian"}),(0,b.jsx)(h.SelectItem,{value:"mother",children:"Mother"}),(0,b.jsx)(h.SelectItem,{value:"father",children:"Father"})]})]})]}),S&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded",children:S}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(c.Button,{onClick:af,disabled:K,className:"flex-1 bg-red-800 hover:bg-red-700",children:K?"Adding...":"Add Student"}),(0,b.jsx)(c.Button,{variant:"outline",onClick:()=>{N(!1),P(""),T("")},disabled:K,children:"Cancel"})]})]})]})]})})]})})]})}a.s(["default",()=>G],75263)}];

//# sourceMappingURL=app_parent-dashboard_page_tsx_259f0c66._.js.map